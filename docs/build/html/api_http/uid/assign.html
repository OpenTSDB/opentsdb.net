<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>/api/uid/assign &#8212; OpenTSDB 2.3 documentation</title>
    <link rel="stylesheet" href="../../_static/solar.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="/api/uid/tsmeta" href="tsmeta.html" />
    <link rel="prev" title="/api/uid" href="index.html" /><link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'>
<link href="../../_static/solarized-dark.css" rel="stylesheet">
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18339382-1']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="tsmeta.html" title="/api/uid/tsmeta"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="/api/uid"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">OpenTSDB 2.3 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >HTTP API</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">/api/uid</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">/api/uid/assign</a><ul>
<li><a class="reference internal" href="#verbs">Verbs</a></li>
<li><a class="reference internal" href="#requests">Requests</a><ul>
<li><a class="reference internal" href="#example-request">Example Request</a></li>
</ul>
</li>
<li><a class="reference internal" href="#response">Response</a><ul>
<li><a class="reference internal" href="#example-response">Example Response</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">/api/uid</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="tsmeta.html"
                        title="next chapter">/api/uid/tsmeta</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="api-uid-assign">
<h1>/api/uid/assign</h1>
<p>This endpoint enables assigning UIDs to new metrics, tag names and tag values. Multiple types and names can be provided in a single call and the API will process each name individually, reporting which names were assigned UIDs successfully, along with the UID assigned, and which failed due to invalid characters or had already been assigned. Assignment can be performed via query string or content data.</p>
<div class="section" id="verbs">
<h2>Verbs</h2>
<ul class="simple">
<li>GET</li>
<li>POST</li>
</ul>
</div>
<div class="section" id="requests">
<h2>Requests</h2>
<p>Each request must have one or more of the following fields:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="10%" />
<col width="5%" />
<col width="5%" />
<col width="45%" />
<col width="10%" />
<col width="5%" />
<col width="5%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Data Type</th>
<th class="head">Required</th>
<th class="head">Description</th>
<th class="head">Default</th>
<th class="head">QS</th>
<th class="head">RW</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>metric</td>
<td>String</td>
<td>Optional</td>
<td>A list of metric names for assignment</td>
<td>&#160;</td>
<td>metric</td>
<td>RW</td>
<td>sys.cpu.0</td>
</tr>
<tr class="row-odd"><td>tagk</td>
<td>String</td>
<td>Optional</td>
<td>A list of tag names for assignment</td>
<td>&#160;</td>
<td>tagk</td>
<td>RW</td>
<td>host</td>
</tr>
<tr class="row-even"><td>tagv</td>
<td>String</td>
<td>Optional</td>
<td>A list of tag values for assignment</td>
<td>&#160;</td>
<td>tagv</td>
<td>RW</td>
<td>web01</td>
</tr>
</tbody>
</table>
<p>When making a query string request, multiple names for a given type can be supplied in a comma separated fashion. E.g. <code class="docutils literal notranslate"><span class="pre">metric=sys.cpu.0,sys.cpu.1,sys.cpu.2,sys.cpu.3</span></code>. Naming conventions apply: see _______.</p>
<div class="section" id="example-request">
<h3>Example Request</h3>
<p><strong>Query String</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://localhost:4242/api/uid/assign?metric=sys.cpu.0,sys.cpu.1&amp;tagk=host&amp;tagv=web01,web02,web03
</pre></div>
</div>
<p><strong>JSON Content</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;metric&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;sys.cpu.0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sys.cpu.1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;illegal!character&quot;</span>
    <span class="p">],</span>
    <span class="s2">&quot;tagk&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;host&quot;</span>
    <span class="p">],</span>
    <span class="s2">&quot;tagv&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;web01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;web02&quot;</span><span class="p">,</span>
        <span class="s2">&quot;web03&quot;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="response">
<h2>Response</h2>
<p>The response will contain a map of successful assignments along with the hex encoded UID value. If one or more values were not assigned, a separate map will contain a list of the values and the reason why they were not assigned. Maps with the type name and <code class="docutils literal notranslate"><span class="pre">&lt;type&gt;_errors</span></code> will be generated only if one or more values for that type were provided.</p>
<p>When all values are assigned, the endpoint returns a 200 status code but if any value failed assignment, it will return a 400.</p>
<div class="section" id="example-response">
<h3>Example Response</h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;metric&quot;</span><span class="o">:</span> <span class="p">{},</span>
    <span class="s2">&quot;metric_errors&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;sys.cpu.0&quot;</span><span class="o">:</span> <span class="s2">&quot;Name already exists with UID: 000042&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sys.cpu.1&quot;</span><span class="o">:</span> <span class="s2">&quot;Name already exists with UID: 000043&quot;</span><span class="p">,</span>
        <span class="s2">&quot;illegal!character&quot;</span><span class="o">:</span> <span class="s2">&quot;Invalid metric (illegal!character): illegal character: !&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;tagv&quot;</span><span class="o">:</span> <span class="p">{},</span>
    <span class="s2">&quot;tagk_errors&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;host&quot;</span><span class="o">:</span> <span class="s2">&quot;Name already exists with UID: 0007E5&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;tagk&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;web01&quot;</span><span class="o">:</span> <span class="s2">&quot;000012&quot;</span><span class="p">,</span>
        <span class="s2">&quot;web02&quot;</span><span class="o">:</span> <span class="s2">&quot;000013&quot;</span><span class="p">,</span>
        <span class="s2">&quot;web03&quot;</span><span class="o">:</span> <span class="s2">&quot;000014&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="tsmeta.html" title="/api/uid/tsmeta"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="/api/uid"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">OpenTSDB 2.3 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >HTTP API</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >/api/uid</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2018, OpenTSDB.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>. Theme by <a href="http://github.com/vkvn">vkvn</a>
    </div>
  </body>
</html>