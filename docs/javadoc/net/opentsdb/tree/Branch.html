<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.6.0_30) on Thu Apr 10 13:57:30 EDT 2014 -->
<title>Branch</title>
<meta name="date" content="2014-04-10">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Branch";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>PREV CLASS</li>
<li><a href="../../../net/opentsdb/tree/Leaf.html" title="class in net.opentsdb.tree"><span class="strong">NEXT CLASS</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?net/opentsdb/tree/Branch.html" target="_top">FRAMES</a></li>
<li><a href="Branch.html" target="_top">NO FRAMES</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>SUMMARY:&nbsp;</li>
<li>NESTED&nbsp;|&nbsp;</li>
<li>FIELD&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">CONSTR</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">METHOD</a></li>
</ul>
<ul class="subNavList">
<li>DETAIL:&nbsp;</li>
<li>FIELD&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">CONSTR</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">METHOD</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<p class="subTitle">net.opentsdb.tree</p>
<h2 title="Class Branch" class="title">Class Branch</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>net.opentsdb.tree.Branch</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;<a href="../../../net/opentsdb/tree/Branch.html" title="class in net.opentsdb.tree">Branch</a>&gt;</dd>
</dl>
<hr>
<br>
<pre>public final class <strong>Branch</strong>
extends <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;<a href="../../../net/opentsdb/tree/Branch.html" title="class in net.opentsdb.tree">Branch</a>&gt;</pre>
<div class="block">Represents a branch of a meta data tree, used to organize timeseries into 
 a hierarchy for easy navigation. Each branch is composed of itself and
 potential child branches and/or child leaves. 
 <p>
 Branch IDs are hex encoded byte arrays composed of the tree ID + hash of 
 the display name for each previous branch. The tree ID is encoded on 
 <a href="../../../net/opentsdb/tree/Tree.html#TREE_ID_WIDTH()"><code>Tree.TREE_ID_WIDTH()</code></a> bytes, each hash is then <code>INT_WIDTH</code> 
 bytes. So the if the tree ID width is 2 bytes and Java Integers are 4 bytes, 
 the root for tree # 1 is just <code>0001</code>. A child of the root could be 
 <code>00001A3B190C2</code> and so on. These IDs are used as the row key in storage.
 <p>
 Branch definitions are JSON objects stored in the "branch" column of the 
 branch ID row. Only the tree ID, path and display name are stored in the
 definition column to keep space down. Leaves are stored in separate columns
 and child branch definitions are stored in separate rows. Note that the root
 branch definition for a tree will be stored in the same row as the tree 
 definition since they share the same row key.
 <p>
 When fetching a branch with children and leaves, a scanner is
 configured with a row key regex to scan any rows that match the branch ID 
 plus an additional <code>INT_WIDTH</code> so that when we scan, we can pick up all
 of the rows with child branch definitions. Also, when loading a full branch, 
 any leaves for the request branch can load the associated UID names from 
 storage, so this can get expensive. Leaves for a child branch will not be 
 loaded, only leaves that belong directly to the local will. Also, children 
 branches of children will not be loaded. We only return one branch at a 
 time since the tree could be HUGE!
 <p>
 Storing a branch will only write the definition column for the local branch
 object. Child branches will not be written to storage. If you've loaded
 and modified children in this branch, you need to loop through the children
 and store them individually. Leaves belonging to this branch will be stored
 and collisions recorded to the given Tree object.</div>
<dl><dt><span class="strong">Since:</span></dt>
  <dd>2.0</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#Branch()">Branch</a></strong>()</code>
<div class="block">Default empty constructor necessary for de/serialization</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#Branch(net.opentsdb.tree.Branch)">Branch</a></strong>(<a href="../../../net/opentsdb/tree/Branch.html" title="class in net.opentsdb.tree">Branch</a>&nbsp;original)</code>
<div class="block">Copy constructor that creates a completely independent copy of the original</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#Branch(int)">Branch</a></strong>(int&nbsp;tree_id)</code>
<div class="block">Constructor that sets the tree ID</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#addChild(net.opentsdb.tree.Branch)">addChild</a></strong>(<a href="../../../net/opentsdb/tree/Branch.html" title="class in net.opentsdb.tree">Branch</a>&nbsp;branch)</code>
<div class="block">Adds a child branch to the local branch set if it doesn't exist.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#addLeaf(net.opentsdb.tree.Leaf, net.opentsdb.tree.Tree)">addLeaf</a></strong>(<a href="../../../net/opentsdb/tree/Leaf.html" title="class in net.opentsdb.tree">Leaf</a>&nbsp;leaf,
       <a href="../../../net/opentsdb/tree/Tree.html" title="class in net.opentsdb.tree">Tree</a>&nbsp;tree)</code>
<div class="block">Adds a leaf to the local branch, looking for collisions</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#BRANCH_QUALIFIER()">BRANCH_QUALIFIER</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#compareTo(net.opentsdb.tree.Branch)">compareTo</a></strong>(<a href="../../../net/opentsdb/tree/Branch.html" title="class in net.opentsdb.tree">Branch</a>&nbsp;branch)</code>
<div class="block">Comparator based on the <code>display_name</code> to sort branches when 
 returning to an RPC calls</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#compileBranchId()">compileBranchId</a></strong>()</code>
<div class="block">Attempts to compile the branch ID for this branch.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#equals(java.lang.Object)">equals</a></strong>(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;obj)</code>
<div class="block">Just compares the branch display name</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static com.stumbleupon.async.Deferred&lt;<a href="../../../net/opentsdb/tree/Branch.html" title="class in net.opentsdb.tree">Branch</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#fetchBranch(net.opentsdb.core.TSDB, byte[], boolean)">fetchBranch</a></strong>(<a href="../../../net/opentsdb/core/TSDB.html" title="class in net.opentsdb.core">TSDB</a>&nbsp;tsdb,
           byte[]&nbsp;branch_id,
           boolean&nbsp;load_leaf_uids)</code>
<div class="block">Attempts to fetch the branch, it's leaves and all child branches.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static com.stumbleupon.async.Deferred&lt;<a href="../../../net/opentsdb/tree/Branch.html" title="class in net.opentsdb.tree">Branch</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#fetchBranchOnly(net.opentsdb.core.TSDB, byte[])">fetchBranchOnly</a></strong>(<a href="../../../net/opentsdb/core/TSDB.html" title="class in net.opentsdb.core">TSDB</a>&nbsp;tsdb,
               byte[]&nbsp;branch_id)</code>
<div class="block">Attempts to fetch only the branch definition object from storage.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/6/docs/api/java/util/TreeSet.html?is-external=true" title="class or interface in java.util">TreeSet</a>&lt;<a href="../../../net/opentsdb/tree/Branch.html" title="class in net.opentsdb.tree">Branch</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#getBranches()">getBranches</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#getBranchId()">getBranchId</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#getDepth()">getDepth</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#getDisplayName()">getDisplayName</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/6/docs/api/java/util/TreeSet.html?is-external=true" title="class or interface in java.util">TreeSet</a>&lt;<a href="../../../net/opentsdb/tree/Leaf.html" title="class in net.opentsdb.tree">Leaf</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#getLeaves()">getLeaves</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>,<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#getPath()">getPath</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#getTreeId()">getTreeId</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#hashCode()">hashCode</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#idToString(byte[])">idToString</a></strong>(byte[]&nbsp;branch_id)</code>
<div class="block">Converts a branch ID hash to a hex encoded, upper case string with padding</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#prependParentPath(java.util.Map)">prependParentPath</a></strong>(<a href="http://download.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>,<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;parent_path)</code>
<div class="block">Sets the path for this branch based off the path of the parent.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#setDisplayName(java.lang.String)">setDisplayName</a></strong>(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;display_name)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#setTreeId(int)">setTreeId</a></strong>(int&nbsp;tree_id)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>com.stumbleupon.async.Deferred&lt;<a href="http://download.oracle.com/javase/6/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang">Boolean</a>&gt;&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#storeBranch(net.opentsdb.core.TSDB, net.opentsdb.tree.Tree, boolean)">storeBranch</a></strong>(<a href="../../../net/opentsdb/core/TSDB.html" title="class in net.opentsdb.core">TSDB</a>&nbsp;tsdb,
           <a href="../../../net/opentsdb/tree/Tree.html" title="class in net.opentsdb.tree">Tree</a>&nbsp;tree,
           boolean&nbsp;store_leaves)</code>
<div class="block">Attempts to write the branch definition and optionally child leaves to
 storage via CompareAndSets.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#stringToId(java.lang.String)">stringToId</a></strong>(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;branch_id)</code>
<div class="block">Converts a hex string to a branch ID byte array (row key)</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../net/opentsdb/tree/Branch.html#toString()">toString</a></strong>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Branch()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Branch</h4>
<pre>public&nbsp;Branch()</pre>
<div class="block">Default empty constructor necessary for de/serialization</div>
</li>
</ul>
<a name="Branch(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Branch</h4>
<pre>public&nbsp;Branch(int&nbsp;tree_id)</pre>
<div class="block">Constructor that sets the tree ID</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>tree_id</code> - ID of the tree this branch is associated with</dd></dl>
</li>
</ul>
<a name="Branch(net.opentsdb.tree.Branch)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Branch</h4>
<pre>public&nbsp;Branch(<a href="../../../net/opentsdb/tree/Branch.html" title="class in net.opentsdb.tree">Branch</a>&nbsp;original)</pre>
<div class="block">Copy constructor that creates a completely independent copy of the original</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>original</code> - The original object to copy from</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="hashCode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hashCode</h4>
<pre>public&nbsp;int&nbsp;hashCode()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a></code>&nbsp;in class&nbsp;<code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>Returns the <code>display_name</code>'s hash code or 0 if it's not set</dd></dl>
</li>
</ul>
<a name="equals(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>equals</h4>
<pre>public&nbsp;boolean&nbsp;equals(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;obj)</pre>
<div class="block">Just compares the branch display name</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a></code>&nbsp;in class&nbsp;<code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>obj</code> - The object to compare this to</dd>
<dt><span class="strong">Returns:</span></dt><dd>True if the branch IDs are the same or the incoming object is 
 this one</dd></dl>
</li>
</ul>
<a name="compareTo(net.opentsdb.tree.Branch)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compareTo</h4>
<pre>public&nbsp;int&nbsp;compareTo(<a href="../../../net/opentsdb/tree/Branch.html" title="class in net.opentsdb.tree">Branch</a>&nbsp;branch)</pre>
<div class="block">Comparator based on the <code>display_name</code> to sort branches when 
 returning to an RPC calls</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Comparable.html?is-external=true#compareTo(T)" title="class or interface in java.lang">compareTo</a></code>&nbsp;in interface&nbsp;<code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;<a href="../../../net/opentsdb/tree/Branch.html" title="class in net.opentsdb.tree">Branch</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>Information about this branch including ID and display name</dd></dl>
</li>
</ul>
<a name="addChild(net.opentsdb.tree.Branch)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addChild</h4>
<pre>public&nbsp;boolean&nbsp;addChild(<a href="../../../net/opentsdb/tree/Branch.html" title="class in net.opentsdb.tree">Branch</a>&nbsp;branch)</pre>
<div class="block">Adds a child branch to the local branch set if it doesn't exist. Also
 initializes the set if it hasn't been initialized yet</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>branch</code> - The branch to add</dd>
<dt><span class="strong">Returns:</span></dt><dd>True if the branch did not exist in the set previously</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the incoming branch is null</dd></dl>
</li>
</ul>
<a name="addLeaf(net.opentsdb.tree.Leaf, net.opentsdb.tree.Tree)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addLeaf</h4>
<pre>public&nbsp;boolean&nbsp;addLeaf(<a href="../../../net/opentsdb/tree/Leaf.html" title="class in net.opentsdb.tree">Leaf</a>&nbsp;leaf,
              <a href="../../../net/opentsdb/tree/Tree.html" title="class in net.opentsdb.tree">Tree</a>&nbsp;tree)</pre>
<div class="block">Adds a leaf to the local branch, looking for collisions</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>leaf</code> - The leaf to add</dd><dd><code>tree</code> - The tree to report to with collisions</dd>
<dt><span class="strong">Returns:</span></dt><dd>True if the leaf was new, false if the leaf already exists or 
 would cause a collision</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the incoming leaf is null</dd></dl>
</li>
</ul>
<a name="compileBranchId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compileBranchId</h4>
<pre>public&nbsp;byte[]&nbsp;compileBranchId()</pre>
<div class="block">Attempts to compile the branch ID for this branch. In order to successfully
 compile, the <code>tree_id</code>, <code>path</code> and <code>display_name</code> must
 be set. The path may be empty, which indicates this is a root branch, but
 it must be a valid Map object.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The branch ID as a byte array</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if any required parameters are missing</dd></dl>
</li>
</ul>
<a name="prependParentPath(java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prependParentPath</h4>
<pre>public&nbsp;void&nbsp;prependParentPath(<a href="http://download.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>,<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;parent_path)</pre>
<div class="block">Sets the path for this branch based off the path of the parent. This map
 may be empty, in which case the branch is considered a root.
 <b>Warning:</b> If the path has already been set, this will create a new
 path, clearing out any existing entries</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>parent_path</code> - The map to store as the path</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the parent path is null</dd></dl>
</li>
</ul>
<a name="storeBranch(net.opentsdb.core.TSDB, net.opentsdb.tree.Tree, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storeBranch</h4>
<pre>public&nbsp;com.stumbleupon.async.Deferred&lt;<a href="http://download.oracle.com/javase/6/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang">Boolean</a>&gt;&gt;&nbsp;storeBranch(<a href="../../../net/opentsdb/core/TSDB.html" title="class in net.opentsdb.core">TSDB</a>&nbsp;tsdb,
                                                             <a href="../../../net/opentsdb/tree/Tree.html" title="class in net.opentsdb.tree">Tree</a>&nbsp;tree,
                                                             boolean&nbsp;store_leaves)</pre>
<div class="block">Attempts to write the branch definition and optionally child leaves to
 storage via CompareAndSets.
 Each returned deferred will be a boolean regarding whether the CAS call 
 was successful or not. This will be a mix of the branch call and leaves.
 Some of these may be false, which is OK, because if the branch
 definition already exists, we don't need to re-write it. Leaves will
 return false if there was a collision.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>tsdb</code> - The TSDB to use for access</dd><dd><code>tree</code> - The tree to record collisions to</dd><dd><code>store_leaves</code> - Whether or not child leaves should be written to
 storage</dd>
<dt><span class="strong">Returns:</span></dt><dd>A list of deferreds to wait on for completion.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>org.hbase.async.HBaseException</code> - if there was an issue</dd>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the tree ID was missing or data was 
 missing</dd></dl>
</li>
</ul>
<a name="fetchBranchOnly(net.opentsdb.core.TSDB, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchBranchOnly</h4>
<pre>public static&nbsp;com.stumbleupon.async.Deferred&lt;<a href="../../../net/opentsdb/tree/Branch.html" title="class in net.opentsdb.tree">Branch</a>&gt;&nbsp;fetchBranchOnly(<a href="../../../net/opentsdb/core/TSDB.html" title="class in net.opentsdb.core">TSDB</a>&nbsp;tsdb,
                                                     byte[]&nbsp;branch_id)</pre>
<div class="block">Attempts to fetch only the branch definition object from storage. This is
 much faster than scanning many rows for child branches as per the 
 <a href="../../../net/opentsdb/tree/Branch.html#fetchBranch(net.opentsdb.core.TSDB, byte[], boolean)"><code>fetchBranch(net.opentsdb.core.TSDB, byte[], boolean)</code></a> call. Useful when building trees, particularly to
 fetch the root branch.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>tsdb</code> - The TSDB to use for access</dd><dd><code>branch_id</code> - ID of the branch to retrieve</dd>
<dt><span class="strong">Returns:</span></dt><dd>A branch if found, null if it did not exist</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../net/opentsdb/utils/JSONException.html" title="class in net.opentsdb.utils">JSONException</a></code> - if the object could not be deserialized</dd></dl>
</li>
</ul>
<a name="fetchBranch(net.opentsdb.core.TSDB, byte[], boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchBranch</h4>
<pre>public static&nbsp;com.stumbleupon.async.Deferred&lt;<a href="../../../net/opentsdb/tree/Branch.html" title="class in net.opentsdb.tree">Branch</a>&gt;&nbsp;fetchBranch(<a href="../../../net/opentsdb/core/TSDB.html" title="class in net.opentsdb.core">TSDB</a>&nbsp;tsdb,
                                                 byte[]&nbsp;branch_id,
                                                 boolean&nbsp;load_leaf_uids)</pre>
<div class="block">Attempts to fetch the branch, it's leaves and all child branches.
 The UID names for each leaf may also be loaded if configured.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>tsdb</code> - The TSDB to use for storage access</dd><dd><code>branch_id</code> - ID of the branch to retrieve</dd><dd><code>load_leaf_uids</code> - Whether or not to load UID names for each leaf</dd>
<dt><span class="strong">Returns:</span></dt><dd>A branch if found, null if it did not exist</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../net/opentsdb/utils/JSONException.html" title="class in net.opentsdb.utils">JSONException</a></code> - if the object could not be deserialized</dd></dl>
</li>
</ul>
<a name="idToString(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>idToString</h4>
<pre>public static&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;idToString(byte[]&nbsp;branch_id)</pre>
<div class="block">Converts a branch ID hash to a hex encoded, upper case string with padding</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>branch_id</code> - The ID to convert</dd>
<dt><span class="strong">Returns:</span></dt><dd>the branch ID as a character hex string</dd></dl>
</li>
</ul>
<a name="stringToId(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stringToId</h4>
<pre>public static&nbsp;byte[]&nbsp;stringToId(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;branch_id)</pre>
<div class="block">Converts a hex string to a branch ID byte array (row key)</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>branch_id</code> - The branch ID to convert</dd>
<dt><span class="strong">Returns:</span></dt><dd>The branch ID as a byte array</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the string is not valid hex</dd></dl>
</li>
</ul>
<a name="BRANCH_QUALIFIER()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BRANCH_QUALIFIER</h4>
<pre>public static&nbsp;byte[]&nbsp;BRANCH_QUALIFIER()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>The branch column qualifier name</dd></dl>
</li>
</ul>
<a name="getTreeId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTreeId</h4>
<pre>public&nbsp;int&nbsp;getTreeId()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>The ID of the tree this branch belongs to</dd></dl>
</li>
</ul>
<a name="getBranchId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBranchId</h4>
<pre>public&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getBranchId()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>The ID of this branch</dd></dl>
</li>
</ul>
<a name="getPath()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPath</h4>
<pre>public&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>,<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;getPath()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>The path of the tree</dd></dl>
</li>
</ul>
<a name="getDepth()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDepth</h4>
<pre>public&nbsp;int&nbsp;getDepth()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>Depth of this branch</dd></dl>
</li>
</ul>
<a name="getDisplayName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDisplayName</h4>
<pre>public&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getDisplayName()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>Name to display to the public</dd></dl>
</li>
</ul>
<a name="getLeaves()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLeaves</h4>
<pre>public&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/util/TreeSet.html?is-external=true" title="class or interface in java.util">TreeSet</a>&lt;<a href="../../../net/opentsdb/tree/Leaf.html" title="class in net.opentsdb.tree">Leaf</a>&gt;&nbsp;getLeaves()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>Ordered set of leaves belonging to this branch</dd></dl>
</li>
</ul>
<a name="getBranches()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBranches</h4>
<pre>public&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/util/TreeSet.html?is-external=true" title="class or interface in java.util">TreeSet</a>&lt;<a href="../../../net/opentsdb/tree/Branch.html" title="class in net.opentsdb.tree">Branch</a>&gt;&nbsp;getBranches()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>Ordered set of child branches</dd></dl>
</li>
</ul>
<a name="setTreeId(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setTreeId</h4>
<pre>public&nbsp;void&nbsp;setTreeId(int&nbsp;tree_id)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>tree_id</code> - ID of the tree this branch belongs to</dd></dl>
</li>
</ul>
<a name="setDisplayName(java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>setDisplayName</h4>
<pre>public&nbsp;void&nbsp;setDisplayName(<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;display_name)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>display_name</code> - Public name to display</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>PREV CLASS</li>
<li><a href="../../../net/opentsdb/tree/Leaf.html" title="class in net.opentsdb.tree"><span class="strong">NEXT CLASS</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?net/opentsdb/tree/Branch.html" target="_top">FRAMES</a></li>
<li><a href="Branch.html" target="_top">NO FRAMES</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>SUMMARY:&nbsp;</li>
<li>NESTED&nbsp;|&nbsp;</li>
<li>FIELD&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">CONSTR</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">METHOD</a></li>
</ul>
<ul class="subNavList">
<li>DETAIL:&nbsp;</li>
<li>FIELD&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">CONSTR</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">METHOD</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
