<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>search &#8212; OpenTSDB 3.0 documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          OpenTSDB</a>
        <span class="navbar-text navbar-version pull-left"><b>3.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://github.com/OpenTSDB/opentsdb/releases">Download</a></li>
                <li><a href="https://github.com/OpenTSDB/opentsdb">Source</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Documentation <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../changes.html">Changes in 3.0</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../changes.html#new-features">New Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changes.html#whats-missing">Whats Missing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation and Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#runtime-requirements">Runtime Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#compile">Compile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#docker">Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#local">Local</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#id1">Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#querying">Querying</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/index.html">Users Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/semanticquery/index.html">Semantic Query (Version 3)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Administrators Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../configuration.html">TSDB Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging.html">Logging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api_http/index.html">HTTP API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../api_http/index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api_http/index.html#version-2-x-to-3-x">Version 2.X to 3.x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api_http/index.html#authentication-permissions">Authentication/Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api_http/index.html#response-codes">Response Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api_http/index.html#errors">Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api_http/index.html#verbs">Verbs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api_http/index.html#query-string-vs-body-content">Query String Vs. Body Content</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api_http/index.html#compressed-requests">Compressed Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api_http/index.html#cors">CORS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api_http/index.html#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api_http/index.html#deprecated-api">Deprecated API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api_http/index.html#api-endpoints">API Endpoints</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">search</a><ul>
<li><a class="reference internal" href="#lookup">Lookup</a><ul>
<li><a class="reference internal" href="#command-format">Command Format</a></li>
<li><a class="reference internal" href="#parameters">Parameters</a></li>
<li><a class="reference internal" href="#query-format">Query Format</a></li>
<li><a class="reference internal" href="#example-command">Example Command</a></li>
<li><a class="reference internal" href="#output">Output</a></li>
<li><a class="reference internal" href="#example-response">Example Response</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  <div class="section" id="search">
<h1>search</h1>
<div class="admonition note" id="index-0">
<p class="admonition-title">Note</p>
<p>Available in 2.1</p>
</div>
<p>The search command allows for searching OpenTSDB to reteive a list of time series or associated meta data. Search does not return actual data points or time series objects stored in the data table. Use the query tools to access that data. Currently only the <code class="docutils literal notranslate"><span class="pre">lookup</span></code> command is implemented.</p>
<div class="section" id="lookup">
<h2>Lookup</h2>
<p>Lookup queries use either the meta data table or the main data table to determine what time series are associated with a given metric, tag name, tag value, tag pair or combination thereof. For example, if you want to know what metrics are available for a tag pair <code class="docutils literal notranslate"><span class="pre">host=web01</span></code> you can execute a lookup to find out.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default lookups are performed against the <code class="docutils literal notranslate"><span class="pre">tsdb-meta</span></code> table. You must enable real-time meta data creation or perform a <code class="docutils literal notranslate"><span class="pre">metasync</span></code> using the <code class="docutils literal notranslate"><span class="pre">uid</span></code> command in order to retreive data from a lookup. Alternatively you can lookup against the raw data table but this can take a very long time depending on how much data is in your system.</p>
</div>
<div class="section" id="command-format">
<h3>Command Format</h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>search lookup &lt;query&gt;
</pre></div>
</div>
</div>
<div class="section" id="parameters">
<h3>Parameters</h3>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 5%" />
<col style="width: 40%" />
<col style="width: 5%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Data Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>query</p></td>
<td><p>String</p></td>
<td><p>One or more command line queries similar to a data CLI query. See the query section below.</p></td>
<td></td>
<td><p>tsd.hbase.rpcs type=</p></td>
</tr>
<tr class="row-odd"><td><p>–use_data_table</p></td>
<td><p>Flag</p></td>
<td><p>Optional flag that will cause the lookup to run against the main <code class="docutils literal notranslate"><span class="pre">tsdb-data</span></code> table. <em>NOTE:</em> This can take a very long time to complete.</p></td>
<td><p>Not set</p></td>
<td><p>–use_data_table</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="query-format">
<h3>Query Format</h3>
<p>For details on crafting a query, see <a class="reference internal" href="../../api_http/search/lookup.html"><span class="doc">/api/search/lookup</span></a>. The CLI query is similar to an API query but spaces are used as separators instead of commas and curly braces are not used.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>&lt;metric&gt;<span class="o">]</span> <span class="o">[[</span>tagk<span class="o">]=[</span>tagv<span class="o">]]</span> ...<span class="o">[[</span>tagk<span class="o">]=[</span>tagv<span class="o">]]</span>
</pre></div>
</div>
<p>At least one metric, tagk or tagv is required.</p>
</div>
<div class="section" id="example-command">
<h3>Example Command</h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>search lookup tsd.hbase.rpcs <span class="nv">type</span><span class="o">=</span>
</pre></div>
</div>
</div>
<div class="section" id="output">
<h3>Output</h3>
<p>During a lookup, the results will be printed to standard out. Note that if you have logging enabled, messages may be interspersed with the results. Set the logging level to WARN or ERROR in the <code class="docutils literal notranslate"><span class="pre">logback.xml</span></code> configuration to supress these warnings. You may want to run the lookup in the background and capture standard out to a file, particularly when running lookups against the data table as these may take a long time to complete.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&lt;tsuid&gt; &lt;metric name&gt; &lt;tag/value pairs&gt;
</pre></div>
</div>
<p>Where:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>tsuid</strong> Is the hex encoded UID of the time series</p></li>
<li><p><strong>metric name</strong> Is the decoded name of the metric the row represents</p></li>
<li><p><strong>tag/value pairs</strong> Are the tags associated with the time series</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="example-response">
<h3>Example Response</h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>0023E3000002017358000006017438 tsd.hbase.rpcs <span class="nv">type</span><span class="o">=</span>openScanner <span class="nv">host</span><span class="o">=</span>tsdb-1.mysite.com
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>During scanning, if the UID for a metric, tag name or tag value cannot be resolved to a name, an exception will be thrown.</p>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2021, OpenTSDB.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>